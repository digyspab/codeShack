<% include ../index.ejs %>




<div class="container-flex mt-3">


    <div class="row">
        <% if(user || userName) { %>
        <div class="col-4 mt-8">
            <div class="my-3 p-3 bg-white rounded shadow-sm">
                <p class="border-bottom border-gray pb-2 mb-2">All users</p>

                <% userName.forEach((user, index) => { %> 
                <ul class="list-group mb-1 border-bottom border-black">
                    <div class="row">
                        <div class="col-2">
                                <img src="/assets/img/profile/<%= user.avtar %>" class="rounded-circle player-img" alt=" <%= user.username %>"
                        width="30px" height="30px">
                    </div>
                    <div class="col-6">
                           <a href="<%= user.id %>"> <span><%= user.username %></span></a>
                    </div>
                    </div>
                </ul>
                <% });  %>

            </div>
        </div>

        <!-- search bar  -->
        <div class="col-8">
            <div class="my-3 p-3 bg-white rounded box-shadow">
                <% include ../middleware/search-box %>
            </div>


            <!-- show All Post -->
            <div class="my-3 p-3 bg-white rounded box-shadow">
                <p class="border-bottom border-gray pb-2 mb-2">All your posts</p>
                
                <% if(user) { %>
                <% user.forEach((user, index) => { %> 
                <div class="card  mb-2">
                    <div class="card-body">
                        <img src="/assets/img/profile/<%= user.avtar %>" class="rounded-circle player-img"
                            alt="<%= user.username %>" width="30px" height="30px"><span
                            class="border-bottom border-black pb-1 mb-0 pl-1"><%= user.username %></span>
                       
                        <br>
                        <p class="card-text pl-4" id="<%= user.id %>"><%= user.post %></p>
                        <small class="pl-4">Date: <%= user.date.toLocaleDateString() %></small>
                        <small><%= ` ${user.date.getHours()}:${user.date.getMinutes()}:${user.date.getSeconds()}` %></small>
                    </div>
                </div>
                <% }); %>
                <% } else { %>


                <div class="card">
                    <div class="card-body">
                        <p class="card-text">write your first post</p>
                    </div>
                </div>
                <% } %>

            </div>

        </div>
    </div>



    <% } else { %>
    <div class="my-5 p-3 bg-white rounded shadow-sm">
        <p class="text-center">No posts found</p>

    </div>
    <% } %>
</div>




<script>
    let a = document.getElementById('user_name').textContent;
    a = a.toUpperCase();
</script>

<% include ../include/footer.ejs %>